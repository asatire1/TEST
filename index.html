    <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#3B82F6">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Padel Tournament">
  <meta name="description" content="Professional Padel Tournament Manager - Track matches, scores, and standings">
  
  <title>Padel Tournament Manager</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
    .install-prompt {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 9999;
      max-width: 90%;
      animation: slideUp 0.3s ease-out;
    }
    @keyframes slideUp {
      from { transform: translateX(-50%) translateY(100px); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }
    .install-prompt button {
      background: white;
      color: #667eea;
      border: none;
      padding: 8px 16px;
      margin: 0 4px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <div id="install-prompt" style="display: none;" class="install-prompt">
    <div style="margin-bottom: 8px; font-weight: bold;">üì± Install Padel Tournament App</div>
    <div style="font-size: 14px; margin-bottom: 12px;">Add to your home screen for quick access!</div>
    <button id="install-yes">Install</button>
    <button id="install-no" style="background: transparent; color: white; border: 1px solid white;">Not Now</button>
  </div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    function PadelTournamentApp() {
      const [selectedRound, setSelectedRound] = useState(1);
      const [activeTab, setActiveTab] = useState('tournament');
      const [filterRound, setFilterRound] = useState('all');
      const [filterPlayer, setFilterPlayer] = useState('all');
      const [savedVersions, setSavedVersions] = useState([]);
      
      const [playerNames, setPlayerNames] = useState(() => {
        const saved = localStorage.getItem('padelTournament_playerNames');
        return saved ? JSON.parse(saved) : [
          'Player 1', 'Player 2', 'Player 3', 'Player 4', 'Player 5', 'Player 6', 'Player 7', 'Player 8',
          'Player 9', 'Player 10', 'Player 11', 'Player 12', 'Player 13', 'Player 14', 'Player 15', 'Player 16',
          'Player 17', 'Player 18', 'Player 19', 'Player 20', 'Player 21', 'Player 22', 'Player 23', 'Player 24'
        ];
      });
      
      const [skillRatings, setSkillRatings] = useState(() => {
        const saved = localStorage.getItem('padelTournament_skillRatings');
        return saved ? JSON.parse(saved) : {
          1: 3.85, 2: 3.75, 3: 3.7, 4: 3.6, 5: 3.55, 6: 3.4, 7: 3.4, 8: 3.3,
          9: 3.2, 10: 3.15, 11: 3.1, 12: 3.1, 13: 3.0, 14: 2.95, 15: 2.95, 16: 2.9,
          17: 2.85, 18: 2.85, 19: 2.75, 20: 2.7, 21: 2.6, 22: 2.55, 23: 2.55, 24: 2.45
        };
      });
      
      const [matchScores, setMatchScores] = useState(() => {
        const saved = localStorage.getItem('padelTournament_matchScores');
        if (saved) return JSON.parse(saved);
        const initialScores = {};
        for (let round = 1; round <= 13; round++) {
          initialScores[round] = {};
          for (let match = 1; match <= 6; match++) {
            initialScores[round][match] = { team1Score: null, team2Score: null };
          }
        }
        return initialScores;
      });
      
      const [knockoutScores, setKnockoutScores] = useState(() => {
        const saved = localStorage.getItem('padelTournament_knockoutScores');
        return saved ? JSON.parse(saved) : {
          qf1: { team1Score: null, team2Score: null },
          qf2: { team1Score: null, team2Score: null },
          qf3: { team1Score: null, team2Score: null },
          qf4: { team1Score: null, team2Score: null },
          sf1: { team1Score: null, team2Score: null },
          sf2: { team1Score: null, team2Score: null },
          final: { team1Score: null, team2Score: null }
        };
      });
      
      const [knockoutMaxScore, setKnockoutMaxScore] = useState(() => {
        const saved = localStorage.getItem('padelTournament_knockoutMaxScore');
        return saved ? parseInt(saved) : 16;
      });
      
      const [semiMaxScore, setSemiMaxScore] = useState(() => {
        const saved = localStorage.getItem('padelTournament_semiMaxScore');
        return saved ? parseInt(saved) : 16;
      });
      
      const [finalMaxScore, setFinalMaxScore] = useState(() => {
        const saved = localStorage.getItem('padelTournament_finalMaxScore');
        return saved ? parseInt(saved) : 16;
      });
      
      useEffect(() => {
        localStorage.setItem('padelTournament_playerNames', JSON.stringify(playerNames));
      }, [playerNames]);

      useEffect(() => {
        localStorage.setItem('padelTournament_skillRatings', JSON.stringify(skillRatings));
      }, [skillRatings]);

      useEffect(() => {
        localStorage.setItem('padelTournament_matchScores', JSON.stringify(matchScores));
      }, [matchScores]);

      useEffect(() => {
        localStorage.setItem('padelTournament_knockoutScores', JSON.stringify(knockoutScores));
      }, [knockoutScores]);

      useEffect(() => {
        localStorage.setItem('padelTournament_knockoutMaxScore', knockoutMaxScore.toString());
      }, [knockoutMaxScore]);

      useEffect(() => {
        localStorage.setItem('padelTournament_semiMaxScore', semiMaxScore.toString());
      }, [semiMaxScore]);

      useEffect(() => {
        localStorage.setItem('padelTournament_finalMaxScore', finalMaxScore.toString());
      }, [finalMaxScore]);

      const fixtures = [
        [[1,4,2,3], [5,8,6,7], [9,12,10,11], [13,16,14,15], [17,20,18,19], [21,24,22,23]],
        [[1,24,10,16], [2,23,6,19], [3,22,7,18], [4,21,8,17], [5,20,13,12], [11,15,14,9]],
        [[1,10,9,4], [2,11,12,3], [5,18,13,8], [6,17,14,7], [15,24,19,20], [16,23,22,21]],
        [[1,21,17,2], [4,19,18,3], [5,12,9,8], [6,11,10,7], [13,24,20,16], [14,23,22,15]],
        [[4,14,13,1], [2,16,15,3], [6,24,21,10], [5,23,11,7], [8,22,17,12], [9,19,18,20]],
        [[1,12,5,4], [2,7,6,3], [9,20,21,8], [10,23,22,11], [13,24,17,18], [14,19,16,15]],
        [[2,24,5,20], [4,23,6,19], [1,22,7,18], [3,21,8,17], [15,16,13,12], [9,11,14,10]],
        [[5,12,9,4], [1,13,8,2], [6,16,11,10], [3,17,14,7], [21,19,23,20], [22,18,15,24]],
        [[2,24,17,4], [1,19,18,3], [6,12,11,8], [5,9,10,7], [14,20,21,16], [13,23,22,15]],
        [[2,23,15,5], [1,22,4,20], [8,7,9,18], [12,14,19,13], [3,24,10,17], [11,16,6,21]],
        [[12,22,16,20], [1,23,6,11], [2,9,7,8], [3,21,5,13], [10,18,14,15], [24,4,19,17]],
        [[2,16,13,4], [5,17,14,1], [6,24,21,8], [3,22,15,7], [10,18,23,12], [9,19,20,11]],
        [[2,8,5,4], [3,7,6,1], [10,24,21,12], [9,23,15,11], [14,20,17,16], [13,19,18,22]]
      ];

      const getTierColor = (playerNum) => {
        const tierColors = ['#DC2626', '#EA580C', '#CA8A04', '#16A34A', '#2563EB', '#7C3AED'];
        return tierColors[Math.floor((playerNum - 1) / 4)] || '#6B7280';
      };

      const getTierName = (playerNum) => {
        const tierNames = ['Elite', 'Advanced', 'Intermediate+', 'Intermediate', 'Beginner+', 'Beginner'];
        return tierNames[Math.floor((playerNum - 1) / 4)] || 'Unranked';
      };

      function PlayerBadge({ playerNum, isPartnership = false, showRating = false }) {
        return (
          <div className={`${isPartnership ? 'mr-1' : 'mx-1'} transition-all duration-200 hover:shadow-lg`}>
            <span 
              className="inline-block px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-bold"
              style={{ backgroundColor: getTierColor(playerNum), color: 'white' }}
              title={`Rank ${playerNum} - ${getTierName(playerNum)} - Rating: ${skillRatings[playerNum]}`}
            >
              {playerNames[playerNum - 1]}
            </span>
            {showRating && (
              <div className="text-xs text-gray-500 text-center mt-1">
                {skillRatings[playerNum]}
              </div>
            )}
          </div>
        );
      }

      const handleScoreChange = (round, match, team, value) => {
        const score = parseInt(value) || null;
        if (score !== null && (score < 0 || score > 16)) return;
        
        setMatchScores(prev => {
          const newScores = { ...prev };
          if (!newScores[round]) newScores[round] = {};
          if (!newScores[round][match]) newScores[round][match] = { team1Score: null, team2Score: null };
          
          if (team === 'team1') {
            newScores[round][match].team1Score = score;
            newScores[round][match].team2Score = score !== null ? 16 - score : null;
          } else {
            newScores[round][match].team2Score = score;
            newScores[round][match].team1Score = score !== null ? 16 - score : null;
          }
          return newScores;
        });
      };

      const clearMatchScore = (round, match) => {
        setMatchScores(prev => {
          const newScores = { ...prev };
          if (newScores[round] && newScores[round][match]) {
            newScores[round][match] = { team1Score: null, team2Score: null };
          }
          return newScores;
        });
      };

      function MatchDisplay({ match, matchIndex }) {
        const [team1Player1, team1Player2, team2Player1, team2Player2] = match;
        const currentRound = filterRound !== 'all' ? parseInt(filterRound) : selectedRound;
        const currentScores = matchScores[currentRound]?.[matchIndex + 1] || { team1Score: null, team2Score: null };
        const isMatchComplete = currentScores.team1Score !== null && currentScores.team2Score !== null;
        const team1Rating = (skillRatings[team1Player1] + skillRatings[team1Player2]).toFixed(2);
        const team2Rating = (skillRatings[team2Player1] + skillRatings[team2Player2]).toFixed(2);
        
        return (
          <div className={`bg-white rounded-lg shadow-md p-3 border-l-4 border-blue-500 hover:shadow-lg transition-shadow duration-200 ${isMatchComplete ? 'bg-green-50' : ''} w-full`}>
            <div className="flex justify-between items-start mb-3">
              <div className="font-semibold text-gray-700 text-sm">Match {matchIndex + 1}</div>
              {isMatchComplete && (
                <span className="text-xs px-2 py-1 rounded-full bg-green-200 text-green-800">‚úì</span>
              )}
            </div>
            
            <div className="mb-3">
              <div className="flex flex-wrap items-center gap-1 mb-1">
                <PlayerBadge playerNum={team1Player1} isPartnership={true} />
                <PlayerBadge playerNum={team1Player2} isPartnership={true} />
              </div>
              <div className="text-xs text-gray-500">Total: {team1Rating}</div>
            </div>
            
            <div className="flex items-center justify-center gap-2 mb-3">
              <input
                type="number"
                min="0"
                max="16"
                value={currentScores.team1Score || ''}
                onChange={(e) => handleScoreChange(currentRound, matchIndex + 1, 'team1', e.target.value)}
                className="w-12 h-8 sm:w-14 sm:h-10 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"
                placeholder="0"
              />
              <span className="text-lg font-bold text-gray-600">-</span>
              <input
                type="number"
                min="0"
                max="16"
                value={currentScores.team2Score || ''}
                onChange={(e) => handleScoreChange(currentRound, matchIndex + 1, 'team2', e.target.value)}
                className="w-12 h-8 sm:w-14 sm:h-10 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"
                placeholder="0"
              />
              {isMatchComplete && (
                <button
                  onClick={() => clearMatchScore(currentRound, matchIndex + 1)}
                  className="ml-1 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-gray-600"
                >
                  ‚úï
                </button>
              )}
            </div>
            
            <div className="mb-3">
              <div className="flex flex-wrap items-center gap-1 mb-1">
                <PlayerBadge playerNum={team2Player1} isPartnership={true} />
                <PlayerBadge playerNum={team2Player2} isPartnership={true} />
              </div>
              <div className="text-xs text-gray-500">Total: {team2Rating}</div>
            </div>
            
            {isMatchComplete && (
              <div className="text-center text-sm">
                {currentScores.team1Score > currentScores.team2Score ? (
                  <span className="text-green-600 font-semibold">üèÜ Team 1 Wins!</span>
                ) : currentScores.team2Score > currentScores.team1Score ? (
                  <span className="text-green-600 font-semibold">üèÜ Team 2 Wins!</span>
                ) : (
                  <span className="text-blue-600 font-semibold">ü§ù Tie Game!</span>
                )}
              </div>
            )}
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-2 sm:p-4">
          <div className="max-w-6xl mx-auto">
            <div className="text-center mb-8">
              <h1 className="text-4xl font-bold text-gray-800 mb-2">üèì Padel Tournament</h1>
              <p className="text-gray-600">24 Players ‚Ä¢ 13 Rounds ‚Ä¢ Auto-Save Enabled</p>
            </div>

            <div className="bg-white rounded-lg shadow-md mb-6">
              <div className="flex border-b overflow-x-auto">
                {[
                  ['tournament', 'üèÜ Tournament'],
                  ['players', 'üë• Players'],
                  ['data', 'üíæ Data'],
                  ['results', 'üìä Results'],
                  ['partnerships', 'ü§ù Partnerships'],
                  ['knockout', 'üèÜ Knockout']
                ].map(([tab, label]) => (
                  <button
                    key={tab}
                    onClick={() => setActiveTab(tab)}
                    className={`flex-none py-4 px-4 lg:px-6 font-semibold text-sm lg:text-base whitespace-nowrap ${
                      activeTab === tab ? 'bg-blue-500 text-white' : 'text-gray-600 hover:text-blue-500'
                    }`}
                  >
                    {label}
                  </button>
                ))}
              </div>
            </div>

            {activeTab === 'tournament' && (
              <div className="bg-white rounded-lg shadow-lg p-6">
                <div className="grid grid-cols-7 gap-2 mb-4">
                  {Array.from({ length: 13 }, (_, i) => i + 1).map(round => (
                    <button
                      key={round}
                      onClick={() => { setSelectedRound(round); setFilterRound(round.toString()); }}
                      className={`p-2 rounded-lg font-semibold text-sm ${
                        selectedRound === round ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700'
                      }`}
                    >
                      R{round}
                    </button>
                  ))}
                </div>
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Round {selectedRound}</h2>
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                  {fixtures[selectedRound - 1]?.map((match, idx) => (
                    <MatchDisplay key={idx} match={match} matchIndex={idx} />
                  ))}
                </div>
              </div>
            )}

            {activeTab === 'players' && (
              <div className="bg-white rounded-lg shadow-lg p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-6">Edit Player Names</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                  {playerNames.map((name, index) => (
                    <div key={index} className="border border-gray-200 rounded-lg p-4">
                      <div className="flex items-center mb-3">
                        <span 
                          className="inline-block px-2 py-1 rounded text-xs font-bold mr-2 text-white"
                          style={{ backgroundColor: getTierColor(index + 1) }}
                        >
                          #{index + 1}
                        </span>
                      </div>
                      <input
                        type="text"
                        value={name}
                        onChange={(e) => {
                          const updated = [...playerNames];
                          updated[index] = e.target.value || name;
                          setPlayerNames(updated);
                        }}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"
                      />
                      <input
                        type="number"
                        step="0.05"
                        min="0"
                        max="5"
                        value={skillRatings[index + 1]}
                        onChange={(e) => {
                          const value = parseFloat(e.target.value);
                          if (!isNaN(value) && value >= 0 && value <= 5) {
                            setSkillRatings(prev => ({ ...prev, [index + 1]: value }));
                          }
                        }}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg"
                      />
                    </div>
                  ))}
                </div>
              </div>
            )}

            {activeTab === 'data' && (
              <div className="bg-white rounded-lg shadow-md p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">üíæ Data Management</h2>
                <div className="p-4 bg-green-50 rounded-lg border-2 border-green-300 mb-6">
                  <h3 className="text-lg font-semibold text-green-800 mb-1">‚úÖ Auto-Save Enabled!</h3>
                  <p className="text-sm text-green-700">Your tournament data automatically saves to your browser.</p>
                </div>
                <div className="text-center text-gray-600">
                  Export/import features and more options available in full version.
                </div>
              </div>
            )}

            {activeTab === 'results' && (
              <div className="bg-white rounded-lg shadow-md p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">üìä Results & Standings</h2>
                <p className="text-gray-600">Standings will appear as matches are completed.</p>
              </div>
            )}

            {activeTab === 'partnerships' && (
              <div className="bg-white rounded-lg shadow-md p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">ü§ù Partnerships</h2>
                <p className="text-gray-600">Partnership analysis available in full version.</p>
              </div>
            )}

            {activeTab === 'knockout' && (
              <div className="bg-white rounded-lg shadow-md p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">üèÜ Knockout Stage</h2>
                <p className="text-gray-600">Complete all 13 rounds to unlock knockout stage.</p>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.render(<PadelTournamentApp />, document.getElementById('root'));
  </script>
  
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(() => {});
    }
    
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      setTimeout(() => {
        document.getElementById('install-prompt').style.display = 'block';
      }, 3000);
    });
    
    document.getElementById('install-yes')?.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt = null;
      }
      document.getElementById('install-prompt').style.display = 'none';
    });
    
    document.getElementById('install-no')?.addEventListener('click', () => {
      document.getElementById('install-prompt').style.display = 'none';
    });
  </script>
</body>
</html>
